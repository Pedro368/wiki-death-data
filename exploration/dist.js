!function(n){function t(e){if(a[e])return a[e].exports;var c=a[e]={i:e,l:!1,exports:{}};return n[e].call(c.exports,c,c.exports,t),c.l=!0,c.exports}var a={};t.m=n,t.c=a,t.i=function(n){return n},t.d=function(n,a,e){t.o(n,a)||Object.defineProperty(n,a,{configurable:!1,enumerable:!0,get:e})},t.n=function(n){var a=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(a,"a",a),a},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar METRIC = 'percent_traffic';\nvar $main = d3.select('main');\n\nvar margin = { top: 10, right: 30, bottom: 30, left: 60 };\nvar width = 960 - margin.left - margin.right;\nvar height = 500 - margin.top - margin.bottom;\n\nfunction handleSliderInput() {\n  var val = +this.value;\n  $main.selectAll('.g-person').classed('is-active', function (d) {\n    return d.person_index === val;\n  });\n\n  var $sel = $main.selectAll('.g-person').filter(function (d) {\n    return d.person_index === val;\n  });\n  $sel.raise();\n\n  var _$sel$datum = $sel.datum(),\n      display = _$sel$datum.display;\n\n  $main.select('.name').text(display);\n}\n\nfunction setupChart(data) {\n  var _data = _slicedToArray(data, 2),\n      peopleData = _data[0],\n      pageviewData = _data[1];\n\n  var joinedData = peopleData.map(function (d, i) {\n    return _extends({}, d, {\n      pageviews: pageviewData.filter(function (p) {\n        return p.pageid === d.pageid;\n      }),\n      person_index: i\n    });\n  });\n\n  var $svg = $main.append('svg');\n\n  $svg.attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom);\n\n  var $g = $svg.append('g');\n\n  $g.attr('transform', 'translate(' + margin.left + ', ' + margin.top + ')');\n\n  var $axisX = $g.append('g').attr('class', 'g-axis axis--x');\n  var $axisY = $g.append('g').attr('class', 'g-axis axis--y');\n\n  var $vis = $g.append('g').attr('class', 'g-vis');\n\n  var $person = $vis.selectAll('.g-person').data(joinedData).enter().append('g').attr('class', 'g-person');\n\n  var $path = $person.append('path');\n\n  var scaleX = d3.scaleTime().domain(d3.extent(pageviewData, function (d) {\n    return d.date;\n  })).range([0, width]);\n\n  var max = d3.max(peopleData, function (d) {\n    return d['max_' + METRIC];\n  });\n\n  var scaleY = d3.scaleLinear().domain([0, max]).range([height, 0]);\n\n  var line = d3.line().x(function (d) {\n    return scaleX(d.date);\n  }).y(function (d) {\n    return scaleY(d[METRIC]);\n  }).defined(function (d) {\n    return d[METRIC];\n  });\n\n  $path.datum(function (d) {\n    return d.pageviews;\n  }).attr('d', line);\n\n  // $vis\n  //   .selectAll('circle')\n  //   .data(d => d.pageviews)\n  //   .enter()\n  //   .append('circle')\n  //   .attr('cx', d => scaleX(d.date))\n  //   .attr('cy', d => scaleY(d[METRIC]))\n  //   .attr('r', 2);\n\n  var axisY = d3.axisLeft(scaleY).tickFormat(d3.format('.3%'));\n  $axisY.call(axisY);\n\n  var axisX = d3.axisBottom(scaleX);\n  $axisX.call(axisX).attr('transform', 'translate(0, ' + height + ')');\n\n  $main.append('input').attr('type', 'range').attr('value', 0).attr('min', 0).attr('max', joinedData.length).on('input', handleSliderInput);\n\n  $main.append('p').attr('class', 'name');\n}\n\nfunction convertTimestampToDate(timestamp) {\n  var year = timestamp.substring(0, 4);\n  var month = +timestamp.substring(4, 6) - 1;\n  var date = timestamp.substring(6, 8);\n  return new Date(year, month, date);\n}\n\nfunction loadPeopleData() {\n  return new Promise(function (resolve, reject) {\n    d3.csv('data/people.csv', function (d) {\n      return _extends({}, d, {\n        max_views: +d.max_views,\n        max_percent_traffic: +d.max_percent_traffic,\n        thumbnail_width: +d.thumbnail_width,\n        thumbnail_height: +d.thumbnail_height,\n        year_of_birth: +d.year_of_birth,\n        year_of_death: +d.year_of_death\n      });\n    }).then(resolve).catch(reject);\n  });\n}\n\nfunction loadPageviewsData() {\n  return new Promise(function (resolve, reject) {\n    d3.csv('data/pageviews.csv', function (d) {\n      return _extends({}, d, {\n        date: convertTimestampToDate(d.timestamp),\n        views: +d.views,\n        percent_traffic: +d.percent_traffic\n      });\n    }).then(resolve).catch(reject);\n  });\n}\n\nfunction init() {\n  var p = [loadPeopleData(), loadPageviewsData()];\n  Promise.all(p).then(setupChart).catch(console.error);\n}\n\ninit();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zY3JpcHQuanM/OWE5NSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBNRVRSSUMgPSAncGVyY2VudF90cmFmZmljJztcbmNvbnN0ICRtYWluID0gZDMuc2VsZWN0KCdtYWluJyk7XG5cbmNvbnN0IG1hcmdpbiA9IHsgdG9wOiAxMCwgcmlnaHQ6IDMwLCBib3R0b206IDMwLCBsZWZ0OiA2MCB9O1xuY29uc3Qgd2lkdGggPSA5NjAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodDtcbmNvbnN0IGhlaWdodCA9IDUwMCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXG5mdW5jdGlvbiBoYW5kbGVTbGlkZXJJbnB1dCgpIHtcbiAgY29uc3QgdmFsID0gK3RoaXMudmFsdWU7XG4gICRtYWluXG4gICAgLnNlbGVjdEFsbCgnLmctcGVyc29uJylcbiAgICAuY2xhc3NlZCgnaXMtYWN0aXZlJywgZCA9PiBkLnBlcnNvbl9pbmRleCA9PT0gdmFsKTtcblxuICBjb25zdCAkc2VsID0gJG1haW4uc2VsZWN0QWxsKCcuZy1wZXJzb24nKS5maWx0ZXIoZCA9PiBkLnBlcnNvbl9pbmRleCA9PT0gdmFsKTtcbiAgJHNlbC5yYWlzZSgpO1xuICBjb25zdCB7IGRpc3BsYXkgfSA9ICRzZWwuZGF0dW0oKTtcbiAgJG1haW4uc2VsZWN0KCcubmFtZScpLnRleHQoZGlzcGxheSk7XG59XG5cbmZ1bmN0aW9uIHNldHVwQ2hhcnQoZGF0YSkge1xuICBjb25zdCBbcGVvcGxlRGF0YSwgcGFnZXZpZXdEYXRhXSA9IGRhdGE7XG5cbiAgY29uc3Qgam9pbmVkRGF0YSA9IHBlb3BsZURhdGEubWFwKChkLCBpKSA9PiAoe1xuICAgIC4uLmQsXG4gICAgcGFnZXZpZXdzOiBwYWdldmlld0RhdGEuZmlsdGVyKHAgPT4gcC5wYWdlaWQgPT09IGQucGFnZWlkKSxcbiAgICBwZXJzb25faW5kZXg6IGlcbiAgfSkpO1xuXG4gIGNvbnN0ICRzdmcgPSAkbWFpbi5hcHBlbmQoJ3N2ZycpO1xuXG4gICRzdmdcbiAgICAuYXR0cignd2lkdGgnLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuICAgIC5hdHRyKCdoZWlnaHQnLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSk7XG5cbiAgY29uc3QgJGcgPSAkc3ZnLmFwcGVuZCgnZycpO1xuXG4gICRnLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHttYXJnaW4ubGVmdH0sICR7bWFyZ2luLnRvcH0pYCk7XG5cbiAgY29uc3QgJGF4aXNYID0gJGcuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnZy1heGlzIGF4aXMtLXgnKTtcbiAgY29uc3QgJGF4aXNZID0gJGcuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnZy1heGlzIGF4aXMtLXknKTtcblxuICBjb25zdCAkdmlzID0gJGcuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnZy12aXMnKTtcblxuICBjb25zdCAkcGVyc29uID0gJHZpc1xuICAgIC5zZWxlY3RBbGwoJy5nLXBlcnNvbicpXG4gICAgLmRhdGEoam9pbmVkRGF0YSlcbiAgICAuZW50ZXIoKVxuICAgIC5hcHBlbmQoJ2cnKVxuICAgIC5hdHRyKCdjbGFzcycsICdnLXBlcnNvbicpO1xuXG4gIGNvbnN0ICRwYXRoID0gJHBlcnNvbi5hcHBlbmQoJ3BhdGgnKTtcblxuICBjb25zdCBzY2FsZVggPSBkM1xuICAgIC5zY2FsZVRpbWUoKVxuICAgIC5kb21haW4oZDMuZXh0ZW50KHBhZ2V2aWV3RGF0YSwgZCA9PiBkLmRhdGUpKVxuICAgIC5yYW5nZShbMCwgd2lkdGhdKTtcblxuICBjb25zdCBtYXggPSBkMy5tYXgocGVvcGxlRGF0YSwgZCA9PiBkW2BtYXhfJHtNRVRSSUN9YF0pO1xuXG4gIGNvbnN0IHNjYWxlWSA9IGQzXG4gICAgLnNjYWxlTGluZWFyKClcbiAgICAuZG9tYWluKFswLCBtYXhdKVxuICAgIC5yYW5nZShbaGVpZ2h0LCAwXSk7XG5cbiAgY29uc3QgbGluZSA9IGQzXG4gICAgLmxpbmUoKVxuICAgIC54KGQgPT4gc2NhbGVYKGQuZGF0ZSkpXG4gICAgLnkoZCA9PiBzY2FsZVkoZFtNRVRSSUNdKSlcbiAgICAuZGVmaW5lZChkID0+IGRbTUVUUklDXSk7XG5cbiAgJHBhdGguZGF0dW0oZCA9PiBkLnBhZ2V2aWV3cykuYXR0cignZCcsIGxpbmUpO1xuXG4gIC8vICR2aXNcbiAgLy8gICAuc2VsZWN0QWxsKCdjaXJjbGUnKVxuICAvLyAgIC5kYXRhKGQgPT4gZC5wYWdldmlld3MpXG4gIC8vICAgLmVudGVyKClcbiAgLy8gICAuYXBwZW5kKCdjaXJjbGUnKVxuICAvLyAgIC5hdHRyKCdjeCcsIGQgPT4gc2NhbGVYKGQuZGF0ZSkpXG4gIC8vICAgLmF0dHIoJ2N5JywgZCA9PiBzY2FsZVkoZFtNRVRSSUNdKSlcbiAgLy8gICAuYXR0cigncicsIDIpO1xuXG4gIGNvbnN0IGF4aXNZID0gZDMuYXhpc0xlZnQoc2NhbGVZKS50aWNrRm9ybWF0KGQzLmZvcm1hdCgnLjMlJykpO1xuICAkYXhpc1kuY2FsbChheGlzWSk7XG5cbiAgY29uc3QgYXhpc1ggPSBkMy5heGlzQm90dG9tKHNjYWxlWCk7XG4gICRheGlzWC5jYWxsKGF4aXNYKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsICR7aGVpZ2h0fSlgKTtcblxuICAkbWFpblxuICAgIC5hcHBlbmQoJ2lucHV0JylcbiAgICAuYXR0cigndHlwZScsICdyYW5nZScpXG4gICAgLmF0dHIoJ3ZhbHVlJywgMClcbiAgICAuYXR0cignbWluJywgMClcbiAgICAuYXR0cignbWF4Jywgam9pbmVkRGF0YS5sZW5ndGgpXG4gICAgLm9uKCdpbnB1dCcsIGhhbmRsZVNsaWRlcklucHV0KTtcblxuICAkbWFpbi5hcHBlbmQoJ3AnKS5hdHRyKCdjbGFzcycsICduYW1lJyk7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRUaW1lc3RhbXBUb0RhdGUodGltZXN0YW1wKSB7XG4gIGNvbnN0IHllYXIgPSB0aW1lc3RhbXAuc3Vic3RyaW5nKDAsIDQpO1xuICBjb25zdCBtb250aCA9ICt0aW1lc3RhbXAuc3Vic3RyaW5nKDQsIDYpIC0gMTtcbiAgY29uc3QgZGF0ZSA9IHRpbWVzdGFtcC5zdWJzdHJpbmcoNiwgOCk7XG4gIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGxvYWRQZW9wbGVEYXRhKCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGQzLmNzdignZGF0YS9wZW9wbGUuY3N2JywgZCA9PiAoe1xuICAgICAgLi4uZCxcbiAgICAgIG1heF92aWV3czogK2QubWF4X3ZpZXdzLFxuICAgICAgbWF4X3BlcmNlbnRfdHJhZmZpYzogK2QubWF4X3BlcmNlbnRfdHJhZmZpYyxcbiAgICAgIHRodW1ibmFpbF93aWR0aDogK2QudGh1bWJuYWlsX3dpZHRoLFxuICAgICAgdGh1bWJuYWlsX2hlaWdodDogK2QudGh1bWJuYWlsX2hlaWdodCxcbiAgICAgIHllYXJfb2ZfYmlydGg6ICtkLnllYXJfb2ZfYmlydGgsXG4gICAgICB5ZWFyX29mX2RlYXRoOiArZC55ZWFyX29mX2RlYXRoXG4gICAgfSkpXG4gICAgICAudGhlbihyZXNvbHZlKVxuICAgICAgLmNhdGNoKHJlamVjdCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBsb2FkUGFnZXZpZXdzRGF0YSgpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBkMy5jc3YoJ2RhdGEvcGFnZXZpZXdzLmNzdicsIGQgPT4gKHtcbiAgICAgIC4uLmQsXG4gICAgICBkYXRlOiBjb252ZXJ0VGltZXN0YW1wVG9EYXRlKGQudGltZXN0YW1wKSxcbiAgICAgIHZpZXdzOiArZC52aWV3cyxcbiAgICAgIHBlcmNlbnRfdHJhZmZpYzogK2QucGVyY2VudF90cmFmZmljXG4gICAgfSkpXG4gICAgICAudGhlbihyZXNvbHZlKVxuICAgICAgLmNhdGNoKHJlamVjdCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0KCkge1xuICBjb25zdCBwID0gW2xvYWRQZW9wbGVEYXRhKCksIGxvYWRQYWdldmlld3NEYXRhKCldO1xuICBQcm9taXNlLmFsbChwKVxuICAgIC50aGVuKHNldHVwQ2hhcnQpXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xufVxuXG5pbml0KCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc2NyaXB0LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFSQTtBQUFBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBSEE7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQUFBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFKQTtBQUFBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")}]);